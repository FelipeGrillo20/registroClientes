<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro de Clientes</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <div class="form-container">
    <div id="userInfo" class="user-info-bar" style="display: none;"></div>
    
    <!-- Indicador de Modalidad Seleccionada -->
    <div id="modalidadIndicador" class="modalidad-indicador" style="display: none;">
      <span class="modalidad-icon">üìå</span>
      <span class="modalidad-text">Modalidad: <strong id="modalidadNombre">Orientaci√≥n Psicosocial</strong></span>
      <button type="button" id="btnAgendarCita" class="btn-agendar-cita">
        <i class="fas fa-calendar-plus"></i>
        Agendar Cita
      </button>
    </div>
    
    <h1>üìã Registro de Trabajadores</h1>

    <form id="clientForm">

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           FILA 1: C√©dula | Nombre Completo | Sexo(SVE)
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <!-- C√©dula -->
      <div class="form-row cedula-row">
        <label for="cedula">C√©dula: <span class="required">*</span></label>
        <div class="cedula-input-group">
          <input type="text" id="cedula" required placeholder="Ingrese n√∫mero de c√©dula" />
          <button type="button" id="btnBuscarCedula" class="btn-search-cedula" title="Buscar cliente por c√©dula">
            üîç
          </button>
        </div>
      </div>

      <!-- Nombre Completo -->
      <div class="form-row">
        <label for="name">Nombre Completo: <span class="required">*</span></label>
        <input type="text" id="name" required placeholder="Ingrese nombre completo" />
      </div>

      <!-- Sexo ‚Äî SOLO SVE. Oculto en Orientaci√≥n Psicosocial -->
      <div class="form-row campo-sve" id="campSexo" style="display: none;">
        <label for="sexo">Sexo: <span class="required">*</span></label>
        <select id="sexo">
          <option value="">Seleccione...</option>
          <option value="Femenino">Femenino</option>
          <option value="Masculino">Masculino</option>
        </select>
      </div>

      <!-- Placeholder invisible col 3, fila 1 ‚Äî se muestra en Orientaci√≥n Psicosocial para mantener el grid -->
      <div class="form-row campo-no-sve" id="placeholderSexo"></div>


      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           FILA 2: Cargo(SVE) | V√≠nculo | Sede
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <!-- Cargo ‚Äî SOLO SVE. Oculto en Orientaci√≥n Psicosocial -->
      <div class="form-row campo-sve" id="campCargo" style="display: none;">
        <label for="cargo">Cargo: <span class="required">*</span></label>
        <input type="text" id="cargo" placeholder="Ingrese el cargo del trabajador" />
      </div>

      <!-- Placeholder invisible col 1, fila 2 ‚Äî se muestra en Orientaci√≥n Psicosocial -->
      <div class="form-row campo-no-sve" id="placeholderCargo"></div>

      <!-- V√≠nculo -->
      <div class="form-row">
        <label for="vinculo">V√≠nculo: <span class="required">*</span></label>
        <select id="vinculo" required>
          <option value="">Seleccione...</option>
          <option value="Trabajador">Trabajador</option>
          <option value="Familiar Trabajador">Familiar Trabajador</option>
        </select>
      </div>

      <!-- Sede -->
      <div class="form-row">
        <label for="sede">Sede: <span class="required">*</span></label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input type="text" id="sedeSearch" class="searchable-input" placeholder="Buscar sede..." autocomplete="off" readonly />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="sede" required />
          <div id="sedeDropdown" class="searchable-dropdown"></div>
        </div>
      </div>


      <!-- Los campos C√©dula/Nombre Trabajador se gestionan desde el MODAL -->
      <!-- Los inputs existen en el DOM para que el JS los pueda leer/escribir -->
      <input type="hidden" id="cedulaTrabajador" />
      <input type="hidden" id="nombreTrabajador" />


      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           FILA 3: Entidad Pagadora | Empresa Usuario | Cliente Final
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <!-- Entidad Pagadora -->
      <div class="form-row">
        <label for="entidadPagadora">Entidad Pagadora: <span class="required">*</span></label>
        <select id="entidadPagadora" required>
          <option value="">Seleccione tipo...</option>
          <option value="Particular">Particular</option>
          <option value="ARL">ARL</option>
          <option value="CCF">CCF</option>
        </select>
      </div>

      <!-- Empresa Usuario -->
      <div class="form-row">
        <label for="empresaUsuario">Empresa Usuario: <span class="required">*</span></label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input type="text" id="empresaUsuarioSearch" class="searchable-input" placeholder="Buscar empresa..." autocomplete="off" readonly />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="empresaUsuario" required />
          <div id="empresaUsuarioDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <!-- Cliente Final (Subcontratista) -->
      <div class="form-row">
        <label for="subcontratista">Cliente Final:</label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input type="text" id="subcontratistaSearch" class="searchable-input" placeholder="Buscar subcontratista..." autocomplete="off" readonly />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="subcontratista" />
          <div id="subcontratistaDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <!-- Entidad Espec√≠fica (ARL/CCF) ‚Äî solo visible al seleccionar ARL o CCF -->
      <div class="form-row entidad-especifica-row" id="entidadEspecificaContainer" style="display: none;">
        <label for="entidadEspecifica" id="labelEntidadEspecifica">Seleccione:</label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input type="text" id="entidadEspecificaSearch" class="searchable-input" placeholder="Buscar..." autocomplete="off" readonly />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="entidadEspecifica" />
          <div id="entidadEspecificaDropdown" class="searchable-dropdown"></div>
        </div>
      </div>


      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           FILA 4: Email | Tel√©fono
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <div class="form-row">
        <label for="email">Email: <span class="required">*</span></label>
        <input type="email" id="email" required placeholder="ejemplo@correo.com" />
      </div>

      <div class="form-row">
        <label for="phone">Tel√©fono: <span class="required">*</span></label>
        <input type="text" id="phone" required placeholder="Ingrese n√∫mero de tel√©fono" />
      </div>


      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           BOTONES
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="form-actions">
        <button type="submit" class="btn-submit">Registrar Trabajador</button>
        <button type="button" id="btnCancelarEdicion" class="btn-cancel-edit" style="display: none;">
          ‚ùå Descartar Cambios
        </button>
        <a href="clientes.html" class="btn-ver-clientes">Ver Trabajadores Registrados</a>
      </div>
      
      <div class="form-actions-secondary">
        <a href="modalidad.html" class="btn-seleccionar-modalidad">üîÑ Seleccionar Modalidad</a>
      </div>

    </form>
  </div>
  

  <!-- ============================================ -->
  <!-- MODAL: Datos de Familiar Trabajador          -->
  <!-- ============================================ -->
  <div id="modalFamiliarTrabajador" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="modalFamiliarTitle">
    <div class="modal-box">

      <!-- Cabecera -->
      <div class="modal-header">
        <div class="modal-header-icon">üë®‚Äçüë©‚Äçüëß</div>
        <div>
          <h2 id="modalFamiliarTitle">Datos del Trabajador Titular</h2>
          <p class="modal-subtitle">Ingresa los datos del trabajador al que pertenece este familiar</p>
        </div>
      </div>

      <!-- Cuerpo -->
      <div class="modal-body">
        <div class="modal-field">
          <label for="modalCedulaTrabajador">
            C√©dula del Trabajador <span class="required">*</span>
          </label>
          <input
            type="text"
            id="modalCedulaTrabajador"
            placeholder="Ingrese n√∫mero de c√©dula del trabajador"
            inputmode="numeric"
          />
          <span class="modal-field-hint">Solo n√∫meros</span>
        </div>

        <div class="modal-field">
          <label for="modalNombreTrabajador">
            Nombre Completo del Trabajador <span class="required">*</span>
          </label>
          <input
            type="text"
            id="modalNombreTrabajador"
            placeholder="Ingrese nombre completo del trabajador"
          />
          <span class="modal-field-hint">Tal como aparece en el documento</span>
        </div>
      </div>

      <!-- Pie del modal -->
      <div class="modal-footer">
        <button type="button" id="btnModalCancelarFamiliar" class="modal-btn modal-btn-cancel">
          Cancelar
        </button>
        <button type="button" id="btnModalConfirmarFamiliar" class="modal-btn modal-btn-confirm">
          ‚úÖ Confirmar datos
        </button>
      </div>

    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/auth-check.js"></script>
  <script src="js/script.js"></script>
</body>
</html>