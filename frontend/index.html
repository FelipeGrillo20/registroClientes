<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro de Clientes</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <div class="form-container">
    <!-- Barra de usuario DESPU√âS del t√≠tulo -->
    <div id="userInfo" class="user-info-bar" style="display: none;"></div>
    <h1>üìã Registro de Trabajadores</h1>
    <p class="form-subtitle">Datos Personales del Trabajador</p>

    <form id="clientForm">
      <!-- Campo C√©dula con bot√≥n de b√∫squeda -->
      <div class="form-row cedula-row">
        <label for="cedula">C√©dula: <span class="required">*</span></label>
        <div class="cedula-input-group">
          <input type="text" id="cedula" required placeholder="Ingrese n√∫mero de c√©dula" />
          <button type="button" id="btnBuscarCedula" class="btn-search-cedula" title="Buscar cliente por c√©dula">
            üîç
          </button>
        </div>
      </div>

      <div class="form-row">
        <label for="name">Nombre Completo: <span class="required">*</span></label>
        <input type="text" id="name" required placeholder="Ingrese nombre completo" />
      </div>

      <!-- Campo V√≠nculo -->
      <div class="form-row">
        <label for="vinculo">V√≠nculo: <span class="required">*</span></label>
        <select id="vinculo" required>
          <option value="">Seleccione...</option>
          <option value="Trabajador">Trabajador</option>
          <option value="Familiar Trabajador">Familiar Trabajador</option>
        </select>
      </div>

      <!-- Campo Sede con BUSCADOR -->
      <div class="form-row">
        <label for="sede">Sede: <span class="required">*</span></label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input 
              type="text" 
              id="sedeSearch" 
              class="searchable-input" 
              placeholder="Buscar sede..."
              autocomplete="off"
              readonly
            />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="sede" required />
          <div id="sedeDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <!-- NUEVO: Campo Entidad Pagadora (Din√°mico en Cascada) -->
      <div class="form-row">
        <label for="entidadPagadora">Entidad Pagadora: <span class="required">*</span></label>
        <select id="entidadPagadora" required>
          <option value="">Seleccione tipo...</option>
          <option value="Particular">Particular</option>
          <option value="ARL">ARL</option>
          <option value="CCF">CCF</option>
        </select>
      </div>

      <!-- Campo que se muestra din√°micamente cuando se elige ARL o CCF con BUSCADOR -->
      <div class="form-row" id="entidadEspecificaContainer" style="display: none;">
        <label for="entidadEspecifica" id="labelEntidadEspecifica">Seleccione:</label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input 
              type="text" 
              id="entidadEspecificaSearch" 
              class="searchable-input" 
              placeholder="Buscar..."
              autocomplete="off"
              readonly
            />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="entidadEspecifica" />
          <div id="entidadEspecificaDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <!-- Campo Empresa Usuario (Cliente Final) con BUSCADOR -->
      <div class="form-row">
        <label for="empresaUsuario">Empresa Usuario: <span class="required">*</span></label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input 
              type="text" 
              id="empresaUsuarioSearch" 
              class="searchable-input" 
              placeholder="Buscar empresa..."
              autocomplete="off"
              readonly
            />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="empresaUsuario" required />
          <div id="empresaUsuarioDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <!-- NUEVO: Campo Subcontratista con BUSCADOR -->
      <div class="form-row">
        <label for="subcontratista">Cliente Final:</label>
        <div class="searchable-select-wrapper">
          <div class="searchable-select-trigger">
            <input 
              type="text" 
              id="subcontratistaSearch" 
              class="searchable-input" 
              placeholder="Buscar subcontratista..."
              autocomplete="off"
              readonly
            />
            <span class="searchable-arrow">‚ñº</span>
          </div>
          <input type="hidden" id="subcontratista" />
          <div id="subcontratistaDropdown" class="searchable-dropdown"></div>
        </div>
      </div>

      <div class="form-row">
        <label for="email">Email: <span class="required">*</span></label>
        <input type="email" id="email" required placeholder="ejemplo@correo.com" />
      </div>

      <div class="form-row">
        <label for="phone">Tel√©fono: <span class="required">*</span></label>
        <input type="text" id="phone" required placeholder="Ingrese n√∫mero de tel√©fono" />
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-submit">Registrar Trabajador</button>
        <button type="button" id="btnCancelarEdicion" class="btn-cancel-edit" style="display: none;">
          ‚ùå Descartar Cambios
        </button>
        <a href="clientes.html" class="btn-ver-clientes">Ver Trabajadores Registrados</a>
      </div>
    </form>
  </div>
  
  <script src="js/config.js"></script>
  <script src="js/auth-check.js"></script>
  <script src="js/script.js"></script>
</body>
</html>